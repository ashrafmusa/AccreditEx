# Multi-Language Support Guide

## Overview

AccreditEx now supports full multi-language internationalization (i18n) with English and Arabic language options. This guide provides comprehensive information on implementing, extending, and maintaining multi-language support across the application.

## Supported Languages

- **English** (en) - Default language
- **Arabic** (ar) - Right-to-left (RTL) layout automatically applied

## Architecture

### Translation System

The application uses a custom `useTranslation` hook for all translation needs:

```typescript
import { useTranslation } from '@/hooks/useTranslation';

function MyComponent() {
  const { t } = useTranslation();
  return <div>{t('myTranslationKey')}</div>;
}
```

### File Structure

Translation files are organized by domain/feature:

```
src/data/locales/
├── index.ts              # Main locale configuration (merges all translations)
├── en/                   # English translations
│   ├── common.ts
│   ├── dashboard.ts
│   ├── messaging.ts
│   ├── analytics.ts
│   └── ... (other domains)
└── ar/                   # Arabic translations
    ├── common.ts
    ├── dashboard.ts
    ├── messaging.ts
    ├── analytics.ts
    └── ... (other domains)
```

## Adding Translations

### Step 1: Create Translation Keys

Add your translation keys to both English and Arabic files:

**`src/data/locales/en/myfeature.ts`**
```typescript
export const en = {
  // My Feature
  featureName: 'My Feature Name',
  featureDescription: 'A brief description',
  actionButton: 'Click Me',
  emptyState: 'No items to display',
  errorMessage: 'An error occurred',
};
```

**`src/data/locales/ar/myfeature.ts`**
```typescript
export const ar = {
  // My Feature
  featureName: 'اسم ميزتي',
  featureDescription: 'وصف موجز',
  actionButton: 'انقر فوقي',
  emptyState: 'لا توجد عناصر للعرض',
  errorMessage: 'حدث خطأ',
};
```

### Step 2: Register Translations in Index

Update `src/data/locales/index.ts` to import and merge your new translations:

```typescript
import { en as myFeatureEn } from './en/myfeature';
import { ar as myFeatureAr } from './ar/myfeature';

const locales = {
  en: {
    ...commonEn,
    ...dashboardEn,
    ...myFeatureEn,  // Add here
    // ... other translations
  },
  ar: {
    ...commonAr,
    ...dashboardAr,
    ...myFeatureAr,  // Add here
    // ... other translations
  },
};
```

### Step 3: Use Translations in Components

Always use the `useTranslation` hook to access translations:

```typescript
import { useTranslation } from '@/hooks/useTranslation';

function MyFeature() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('featureName')}</h1>
      <p>{t('featureDescription')}</p>
      <button>{t('actionButton')}</button>
    </div>
  );
}
```

## Best Practices

### 1. Key Naming Convention

Use descriptive, hierarchical naming for clarity:

- ✅ Good: `messageSent`, `userBlockedYou`, `deleteConversation`
- ❌ Bad: `msg_sent`, `blocked_msg`, `delete`

### 2. Organize by Feature

Group related translations logically in separate files:

```typescript
// Good structure
export const en = {
  // User Presence & Typing
  online: 'Online',
  offline: 'Offline',
  justNow: 'Just now',
  
  // Message Status
  sent: 'Sent',
  delivered: 'Delivered',
  read: 'Read',
};
```

### 3. Avoid Hardcoded Strings

**Never use hardcoded strings in components:**

```typescript
// ❌ DON'T
<button title="Reply">Reply</button>

// ✅ DO
<button title={t('reply')}>{t('reply')}</button>
```

### 4. Common vs. Feature-Specific Keys

Use `common.ts` for app-wide terms:
- General actions: send, delete, edit, save, cancel
- Navigation: home, settings, profile, help
- Common UI: yes, no, ok, close, loading

Use feature-specific files for domain-specific terms:
- `messaging.ts`: typing indicators, read receipts, conversation actions
- `dashboard.ts`: dashboard-specific metrics and labels
- `analytics.ts`: analytics-specific terminology

### 5. Avoid Key Duplication

Check existing translations before creating new keys. Reuse where possible:

```typescript
// ✅ Share common keys
sendMessage: 'Send message',

// ✅ But distinguish when semantically different
conversationPinned: 'Conversation pinned',  // Feature-specific
messagePinned: 'Message pinned',           // Feature-specific
pin: 'Pin',                                 // Generic action
```

## Translation Key Reference

### Messaging System (80+ keys)

Located in `src/data/locales/en/messaging.ts` and `src/data/locales/ar/messaging.ts`

**Major Categories:**
- Messaging Center operations
- Message Actions (send, reply, delete, pin, mute, archive, block, report)
- Message Status (sending, sent, delivered, read, typing)
- Conversation Management
- Search & Filter
- User Presence & Typing indicators
- Message Content & Attachments
- Privacy & Security
- Read Receipts
- Group Conversations
- Notifications
- Accessibility
- Error/Success Messages

### Example Usage:

```typescript
// In MessagingCenter.tsx
const { t } = useTranslation();

return (
  <div>
    <input placeholder={t('searchConversations')} />
    <button>{t('attachFile')}</button>
    <span>{t('messageSent')}</span>
  </div>
);
```

## RTL/LTR Support

### Automatic Direction Handling

The application automatically applies:
- **RTL layout** when language is Arabic
- **LTR layout** when language is English

### Using RTL in Styles

```typescript
const { dir } = useTranslation();

// dir will be 'rtl' for Arabic, 'ltr' for English
<div dir={dir}>Content here</div>

// Or using Tailwind classes
className={`${dir === 'rtl' ? 'text-right' : 'text-left'}`}
```

### Common RTL Patterns

```typescript
// Flex row reversal for RTL
className={`flex ${dir === 'rtl' ? 'flex-row-reverse' : 'flex-row'}`}

// Margin adjustments
className={`${dir === 'rtl' ? 'mr-4' : 'ml-4'}`}

// Text alignment
className={`text-${dir === 'rtl' ? 'right' : 'left'}`}
```

## Language Switching

### Runtime Language Switching

The application supports runtime language switching. Users can change language from settings/preferences without page reload.

### Implementation Example

```typescript
function LanguageSwitcher() {
  const { lang, setLanguage } = useTranslation();

  return (
    <select value={lang} onChange={(e) => setLanguage(e.target.value)}>
      <option value="en">English</option>
      <option value="ar">العربية</option>
    </select>
  );
}
```

## Translation Key Hierarchy

### Core Translations (common.ts)
Most frequently used terms that appear across multiple features:
- Navigation items
- CRUD operations
- Common buttons and actions
- Status indicators

### Feature Translations
Domain-specific terminology:
- Messaging translations for messaging system
- Dashboard translations for dashboard components
- Analytics translations for analytics features

### New Feature Workflow

When adding a new major feature:

1. Create `src/data/locales/en/feature_name.ts`
2. Create `src/data/locales/ar/feature_name.ts`
3. Add imports to `src/data/locales/index.ts`
4. Update this documentation with new categories

## Verification Checklist

Before deploying a feature with translations:

- [ ] All hardcoded strings replaced with `t()` calls
- [ ] Translation keys exist in both en and ar files
- [ ] Keys registered in `index.ts`
- [ ] No duplicate keys across files
- [ ] Build completes successfully (`npm run build`)
- [ ] Zero TypeScript compilation errors
- [ ] RTL layout tested for Arabic
- [ ] Language switching tested (if applicable)

## Troubleshooting

### Missing Translation Keys

**Symptom:** Blank text or key name appearing in UI

**Solution:** 
1. Check key exists in translation file
2. Verify key spelling matches exactly
3. Confirm key is registered in `index.ts`
4. Run build to verify no errors

### RTL Layout Issues

**Symptom:** Text appears left-aligned in Arabic

**Solution:**
1. Use `dir` prop from `useTranslation()` hook
2. Apply `dir="rtl"` to container
3. Check margin/padding directions (use `ml/mr` appropriately)

### Build Errors

**Symptom:** Duplicate key errors during build

**Solution:**
1. Search for key across all translation files
2. Remove duplicate entries
3. Keep only one definition per key
4. Rebuild to verify fix

## Performance Considerations

- Translation loading is lazy-loaded per feature
- Switching languages updates UI reactively without page reload
- Translation keys are minified in production build
- No additional HTTP requests for language switching

## Future Enhancements

Potential improvements for the translation system:

- [ ] Pluralization support (for languages with complex plural rules)
- [ ] Date/time localization
- [ ] Number formatting by locale
- [ ] Currency localization
- [ ] Translation management UI
- [ ] Community translation contributions

## Support

For questions or issues related to multi-language support:
1. Check existing translation files for examples
2. Review this documentation
3. Consult the team's i18n guidelines
4. Create new translation keys following established patterns

## Summary

The multi-language support system in AccreditEx provides:

✅ **Easy to use** - Simple `t()` function calls  
✅ **Organized** - Feature-based file structure  
✅ **RTL-ready** - Automatic RTL/LTR handling  
✅ **Scalable** - Easy to add new languages  
✅ **Type-safe** - TypeScript support  
✅ **Production-ready** - Optimized build output  

By following these guidelines, developers can ensure consistent, high-quality multi-language support throughout the AccreditEx application.
