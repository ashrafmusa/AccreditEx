/* Typography - Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Cairo:wght@400;500;600;700&family=Tajawal:wght@400;500;700&display=swap');

@import "tailwindcss";

/* Tailwind v4: Use .dark class selector instead of prefers-color-scheme media query */
@custom-variant dark (&:where(.dark, .dark *));
@theme {
--font-sans: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  --color-brand-primary: var(--user-primary, #4f46e5);
  --color-brand-surface: #ffffff;
  --color-brand-background: #f8fafc;
  --color-brand-border: #e2e8f0;
  --color-brand-text-primary: #0f172a;
  --color-brand-text-secondary: #64748b;
  --color-brand-success: var(--user-success, #22c55e);
  --color-brand-warning: var(--user-warning, #f97316);
  --color-brand-danger: var(--user-danger, #ef4444);
  --color-dark-brand-surface: #1e293b;
  --color-dark-brand-background: #020617;
  --color-dark-brand-border: #334155;
  --color-dark-brand-text-primary: #e2e8f0;
  --color-dark-brand-text-secondary: #94a3b8;
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

/* Arabic Font Family */
[lang="ar"],
[dir="rtl"] {
    font-family: 'Cairo', 'Tajawal', -apple-system, BlinkMacSystemFont, sans-serif;
    line-height: 1.8;
    letter-spacing: 0.01em;
}

/* RTL Layout Utilities */
[dir="rtl"] .flex-row {
    flex-direction: row-reverse;
}

[dir="rtl"] .text-left {
    text-align: right;
}

[dir="rtl"] .text-right {
    text-align: left;
}

/* Logical Properties for RTL Support */
.ms-1 {
    margin-inline-start: 0.25rem;
}

.ms-2 {
    margin-inline-start: 0.5rem;
}

.ms-3 {
    margin-inline-start: 0.75rem;
}

.ms-4 {
    margin-inline-start: 1rem;
}

.ms-6 {
    margin-inline-start: 1.5rem;
}

.ms-8 {
    margin-inline-start: 2rem;
}

.me-1 {
    margin-inline-end: 0.25rem;
}

.me-2 {
    margin-inline-end: 0.5rem;
}

.me-3 {
    margin-inline-end: 0.75rem;
}

.me-4 {
    margin-inline-end: 1rem;
}

.me-6 {
    margin-inline-end: 1.5rem;
}

.me-8 {
    margin-inline-end: 2rem;
}

.ps-2 {
    padding-inline-start: 0.5rem;
}

.ps-3 {
    padding-inline-start: 0.75rem;
}

.ps-4 {
    padding-inline-start: 1rem;
}

.ps-6 {
    padding-inline-start: 1.5rem;
}

.ps-8 {
    padding-inline-start: 2rem;
}

.pe-2 {
    padding-inline-end: 0.5rem;
}

.pe-3 {
    padding-inline-end: 0.75rem;
}

.pe-4 {
    padding-inline-end: 1rem;
}

.pe-6 {
    padding-inline-end: 1.5rem;
}

.pe-8 {
    padding-inline-end: 2rem;
}

/* RTL-aware text alignment */
.text-start {
    text-align: start;
}

.text-end {
    text-align: end;
}

/* Accessibility - Font Size Support */
[data-font-size="small"] {
    font-size: 14px;
}

[data-font-size="medium"] {
    font-size: 16px;
}

[data-font-size="large"] {
    font-size: 18px;
}

[data-font-size="extra-large"] {
    font-size: 20px;
}

/* Accessibility - High Contrast Mode */
.high-contrast {
    --color-text-primary: #000000;
    --color-text-secondary: #1a1a1a;
    --color-background: #ffffff;
    --color-border: #000000;
}

.dark.high-contrast {
    --dark-color-text-primary: #ffffff;
    --dark-color-text-secondary: #e0e0e0;
    --dark-color-background: #000000;
    --dark-color-border: #ffffff;
}

/* Accessibility - Reduce Motion */
.reduce-motion,
.reduce-motion * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
}

/* Compact Mode */
.compact-mode {
    --spacing-scale: 0.75;
}

.compact-mode .space-y-4>*+* {
    margin-top: calc(1rem * var(--spacing-scale, 1));
}

.compact-mode .space-y-6>*+* {
    margin-top: calc(1.5rem * var(--spacing-scale, 1));
}

.compact-mode .p-4 {
    padding: calc(1rem * var(--spacing-scale, 1));
}

.compact-mode .p-6 {
    padding: calc(1.5rem * var(--spacing-scale, 1));
}

/* Process Map Editor Animations */
/* Staggered entrance animation */
@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}
.animate-slideIn {
    animation: slideIn 0.4s ease-out;
}

.animate-slideUp {
    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.animate-scaleIn {
    animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Staggered children - apply to parent container */
.stagger-children>* {
    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) backwards;
}

.stagger-children>*:nth-child(1) {
    animation-delay: 0ms;
}

.stagger-children>*:nth-child(2) {
    animation-delay: 50ms;
}

.stagger-children>*:nth-child(3) {
    animation-delay: 100ms;
}

.stagger-children>*:nth-child(4) {
    animation-delay: 150ms;
}

.stagger-children>*:nth-child(5) {
    animation-delay: 200ms;
}

.stagger-children>*:nth-child(6) {
    animation-delay: 250ms;
}

/* Micro-interaction utilities */
button, a, .interactive {
    transition: transform 0.15s cubic-bezier(0.16, 1, 0.3, 1),
            box-shadow 0.15s ease,
            background-color 0.2s ease,
            color 0.2s ease,
            opacity 0.2s ease;
    }
    
    /* Primary button hover/active feedback */
    button:not(:disabled):hover {
        transform: translateY(-1px);
    }
    
    button:not(:disabled):active {
        transform: translateY(0) scale(0.98);
    }
    
    /* System prefers-reduced-motion support */
    @media (prefers-reduced-motion: reduce) {
    
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
}

/* React Flow custom styles */
.react-flow__node {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.react-flow__node:hover {
    z-index: 1000;
}

.react-flow__edge-path {
    transition: stroke 0.3s ease;
}

.react-flow__edge.selected .react-flow__edge-path {
    stroke: #6366f1;
    stroke-width: 3;
}

/* Enhanced Process Map Node Styling */
.react-flow__node.selected {
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5);
}

/* MUCH LARGER & MORE VISIBLE HANDLES - Easy to Click and Connect! */
.react-flow__handle {
    width: 16px !important;
    height: 16px !important;
    background: white !important;
    border: 3px solid currentColor !important;
    transition: all 0.2s ease !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

.react-flow__handle:hover {
    width: 22px !important;
    height: 22px !important;
    box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.3), 0 4px 12px rgba(0, 0, 0, 0.25) !important;
    transform: scale(1.1) !important;
    z-index: 100 !important;
}

/* Pulse animation for handles when node is selected */
.react-flow__node.selected .react-flow__handle {
    animation: handlePulse 2s ease-in-out infinite;
    box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2), 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

@keyframes handlePulse {
    0%, 100% {
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2), 0 2px 8px rgba(0, 0, 0, 0.15);
    }
    50% {
        box-shadow: 0 0 0 6px rgba(99, 102, 241, 0.4), 0 2px 8px rgba(0, 0, 0, 0.15);
    }
}

/* Connection line styling - make it more visible */
.react-flow__edge-path {
    stroke-width: 3px !important;
}

.react-flow__edge.selected .react-flow__edge-path {
    stroke-width: 4px !important;
}

/* kbd styling for keyboard shortcuts */
kbd {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;
    font-size: 0.875em;
}

/* Border width utilities */
.border-3 {
    border-width: 3px;
}